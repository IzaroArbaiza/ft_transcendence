{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="waitlist.select">Waitlist</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Honk&family=Pixelify+Sans:wght@400..700&family=Press+Start+2P:wght@400&family=Tourney:ital,wght@0,100..900;1,100..900&display=swap');
    </style>
    </style>
    <link rel="shortcut icon" type="image/ico" href="/static/images/favicon.ico">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</head>

<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin:0;
    padding:0;
    font-family: 'Pixelify Sans', sans-serif;
    color: aqua;
  }
  .videobg {
    height: 80vh;
    overflow: hidden;
    position: relative;
  }
  video {
    position: absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:-1;
    object-fit:cover;
  }
  .footer_nav{
    text-decoration: none;
    font-size: 35px;
  }
  .footer_nav:hover{
    text-decoration:dotted;
    font-size: 40px;
  }
  .users-box {
    background: rgba(0,0,0,0.7);
    padding: 30px 50px;
    border: 3px solid aqua;
    border-radius: 15px;
    text-align: center;
    width: 40%;
    margin: 20px auto;
    font-family: 'Press Start 2P', system-ui;
    font-size: 18px;
  }
  .btn-container {
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }
  .users-box p { margin: 8px 0; }
  .arcade_botton {
    position: relative;
    border-style: double;
    height: 75px;
    width: 140px;
    background-color: rgba(174, 13, 13, 0.966);
    border: 5px solid rgba(252, 252, 252, 0.771);
    border-radius: 15px;
    box-shadow: 0 4px white;
    color: aqua;
    font-family: 'Press Start 2P', system-ui;
    transition: all 0.1s ease;
    cursor: pointer;
  }
  .arcade_botton:active {
    top: 5px;
    box-shadow: 0 2px #666;
    color: white;
    border: 5px solid white;
  }
  .arcade_botton:disabled {
    background-color: #666;
    cursor: not-allowed;
  }
</style>

<body>
  <nav class="navbar navbar-expand-lg border border-5 border-white" style="background: linear-gradient(
    45deg,
    hsla(168, 85%, 52%, 0.8),
    hsla(263, 88%, 45%, 0.7) 100%
  )">
    <div class="container-fluid" style="color: aqua; ">   
      <button
        data-mdb-collapse-init
        class="navbar-toggler"
        type="button"
        data-mdb-target="#header_navbar"
        aria-controls="header_navbar"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <i class="fas fa-bars" style="color: aqua;"></i>
      </button>
      <div class="collapse navbar-collapse" id="header_navbar">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="font-family: Pixelify Sans, sans-serif;">
          <li class="nav-item active">
            <a class="nav-link"  aria-current="page" href="/" data-i18n="nav.home">Home</a>
          </li>
          
          
          <li class="nav-item">
            <a class="nav-link" href="/select" data-i18n="nav.select">Select</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/about" data-i18n="nav.about">About</a>
          </li>
          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="/profile" >Profile</a>
          </li>
          {% else %}
            <a
                data-mdb-ripple-init
                class="btn btn-outline-light btn-sm m-2"
                style="font-family: Pixelify Sans, sans-serif; ;"
                onclick="openSignIn()"
                role="button"
                rel="nofollow"
                target="_blank"
                >Log in</a>
          {% endif%}
          {% if user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link" href="/logout" >Logout</a>
          </li>
          {% else %}
          <li class="nav-item">
            <a
            data-mdb-ripple-init
            class="btn btn-outline-light btn-sm m-2"
            style="font-family: Pixelify Sans, sans-serif; font-weight: bold;"
            target="_blank"
            role="button"
            onclick="openRegister()"
            >Register</a>
            </li>
          {% endif%}
        </ul>
      </div>
      <select id="language-selector">
        <option value="en">üá¨üáß English</option>
        <option value="es">üá™üá∏ Espa√±ol</option>
        <option value="eu">üáµüá≤ Euskera</option>
        <option value="fr">üá´üá∑ Fran√ßais</option>
        <option value="fr2">ü•ê Clouseau</option>
      </select>
    </div>
  </nav>

  <div class="videobg">
    <video autoplay loop muted>
      <source src="https://www.shutterstock.com/shutterstock/videos/3467987197/preview/stock-footage--k-abstract-pixel-animation-multicolored-digital-background-geometric-of-square-pattern-moving-with.webm" type="video/webm">
    </video>
    <h1 style="text-align:center; font-family:Tourney, sans-serif; color:aqua; margin-top:2vw;" data-i18n="waitlist.select1">Select Players</h1>
    <div class="users-box">
      <form id="playersForm" method="POST" action="{% url 'duplicate_1vs1' %}">
        {% csrf_token %}
        {% for tmp_user in users %}
          <div>
            {% if tmp_user.user.id == current_user.id %}
              <input type="checkbox" id="player_{{ tmp_user.id }}" name="player_ids[]" value="{{ tmp_user.user.id }}" checked disabled>
              <input type="hidden" name="player_ids[]" value="{{ tmp_user.user.id }}">
              <label for="player_{{ tmp_user.id }}">
                {{ tmp_user.user.username }}
                <span data-i18n="waitlist.you">(You)</span>
              </label>
            {% else %}
              <input type="checkbox" id="player_{{ tmp_user.id }}" name="player_ids[]" value="{{ tmp_user.user.id }}">
              <label for="player_{{ tmp_user.id }}">{{ tmp_user.user.username }}</label>
            {% endif %}
          </div>
        {% empty %}
          <p data-i18n="waitlist.no_players">No available players</p>
        {% endfor %}
        <div class="btn-container">
          <button id="btnJugar" class="arcade_botton" type="submit" disabled data-i18n="nav.play">Jugar</button>
        </div>
      </form>
    </div>
  </div>
  <script>
    const form = document.getElementById('playersForm');
    const playButton = document.getElementById('btnJugar');
    const checkboxes = form.querySelectorAll('input[name="player_ids[]"]');
    checkboxes.forEach((checkbox) => {
      checkbox.addEventListener('change', () => {
        const selectedCheckboxes = Array.from(checkboxes).filter(cb => cb.checked);
        playButton.disabled = selectedCheckboxes.length !== 2;
      });
    });
  </script>

  <footer class="text-center text-white" style="margin-top: -50px ;background-image: url('https://cdn.dribbble.com/userupload/28311765/file/original-b3d1b68257e6c14b3eca96fc95f0649c.gif');background-repeat: no-repeat; background-size: cover ;background-position: center center;";>
    <div class="container">
      <section class="mt-5" style="height: 50px;">
        <div class="row text-center d-flex justify-content-center pt-3" style="font-family: Honk, system-ui;">
          <div class="col-md-3">
            <h6 class="footer_nav">
              <a class="nav-link" href="/" data-i18n="nav.home">Home</a>
            </h6>
          </div>
          <div class="col-md-3">
            <h6 class="footer_nav">
              {% if user.is_authenticated %}
                <a class="nav-link" href="/logout" >Logout</a>
              {% else %}
                <a
                  data-mdb-ripple-init
                  class="button btn-lm m-2"
                  style="text-decoration: none; display: flex; align-items: flex-end;"
                  onclick="openSignIn()"
                  role="button"
                  rel="nofollow"
                  target="_blank"
                  >Log in</a>
              {% endif %}
            </h6>
          </div>
          <div class="col-md-3">
            <h6 class="footer_nav">
              <a class="nav-link" href="/select" data-i18n="nav.select">Select</a>
            </h6>
          </div>
          <div class="col-md-3">
            <h6 class="footer_nav">
              <a class="nav-link" href="/about" data-i18n="nav.about">About us</a>
            </h6>
          </div>
        </div>
      </section>

      <hr class="my-2" />

      <section class="mb-5">
        <div class="row d-flex justify-content-center pt-3">
          <div class="col-lg-10">
            <p style="font-family: Honk, system-ui; font-size: 30px;">
              Lorem ipsum transcendece sit amet retropong adipisicing arcade. Sunt pong arena repellat quaerat voluptatibus placeat nam,
              common-core pariatur est quia magnam 42 Urduliz, ommnia est bytes.
            </p>
          </div>
        </div>
      </section>

    </div>

    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
      ¬© 2025 Copyright:
      <a class="text-white" href="https://mdbootstrap.com/">Retropong</a>
    </div>
  </footer>
 
  <script src="{% static 'i18n.js' %}"></script>
</body>
</html>
