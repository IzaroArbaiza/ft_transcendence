{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pong arena</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Honk&family=Pixelify+Sans:wght@400..700&family=Press+Start+2P:wght@400&family=Tourney:ital,wght@0,100..900;1,100..900&display=swap');
      @font-face {
        font-family: 'Press Start 2P';
        font-style: normal;
        font-display: swap;
        font-weight: 400;
        src: url(@fontsource/press-start-2p/files/press-start-2p-latin-400-normal.woff2) format('woff2'), url(@fontsource/press-start-2p/files/press-start-2p-latin-400-normal.woff) format('woff');
        unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
      }
      .arcade_botton{
          position: relative;
          border-style: double;
          height: 90px;
          width: 110px;
          background-color: rgba(174, 13, 13, 0.966);
          border: 5px solid rgba(252, 252, 252, 0.771);
          box-shadow: 0 4px #999;
          font-family: 'Press Start 2P', system-ui;
          transition: all 0.1s ease;
      }
      .arcade_botton:active{
        top: 5px;
        box-shadow: 0 2px #666;
        color: rgb(255, 255, 255);
        border: 5px solid greenyellow;
      }
      .footer_nav{
        text-decoration: none;
        font-size: 35px;
      }
      .footer_nav:hover{
        text-decoration:dotted;
        font-size: 40px;
      }
      #log {
        background: #667D6A;
        padding: 10px;
        height: 300px; width: 500px;
        overflow-y: scroll;
        font-family: monospace;
        margin-top: 10px;
        margin: 10px auto;
      }
      .modal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        font-family: 'Press Start 2P', system-ui;
      }
      .modal-content {
        background: linear-gradient(45deg, hsla(168, 85%, 52%, 0.6), hsla(263, 88%, 45%, 0.7));
        padding: 30px;
        text-align: center;
        border: 5px solid white;
        border-radius: 15px;
        box-shadow: 0 0 20px lime;
        color: white;
        max-width: 600px;
        margin: auto;
      }
      .modal-content h2 {
        font-size: 20px;
        margin-bottom: 30px;
        color: white;
        text-shadow: 2px 2px black;
      }
      .modal-content button {
        background-color: rgba(0, 0, 0, 0.8);
        color: lime;
        text-decoration: none;
        padding: 15px 25px;
        margin: 10px;
        border: 3px solid lime;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 5px #333;
        transition: all 0.2s ease;
        font-family: 'Press Start 2P', system-ui;
      }
      .modal-content button:hover {
        background-color: lime;
        color: black;
        border-color: white;
        box-shadow: 0 2px #222;
      }
      #goHome {
        background-color: rgba(255, 69, 69, 0.9);
        color: white;
        border-color: white;
      }
    </style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </head>

<nav class="navbar navbar-expand-lg border border-5 border-white" style="background: linear-gradient(
  45deg,
  hsla(168, 85%, 52%, 0.8),
  hsla(263, 88%, 45%, 0.7) 100%
)">
  <div class="container-fluid" style="color: aqua; ">   
    <button
      data-mdb-collapse-init
      class="navbar-toggler"
      type="button"
      data-mdb-target="#header_navbar"
      aria-controls="header_navbar"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars" style="color: aqua;"></i>
    </button>
    <div class="collapse navbar-collapse" id="header_navbar">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="font-family: Pixelify Sans, sans-serif;">
        <li class="nav-item active">
          <a class="nav-link"  aria-current="page" href="/" data-i18n="nav.home">Home</a>
        </li>
        
        
        <li class="nav-item">
          <a class="nav-link" href="/select" data-i18n="nav.select">Select</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about" data-i18n="nav.about">About</a>
        </li>
        {% if user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="/profile" >Profile</a>
        </li>
        {% else %}
          <a
              data-mdb-ripple-init
              class="btn btn-outline-light btn-sm m-2"
              style="font-family: Pixelify Sans, sans-serif; ;"
              onclick="openSignIn()"
              role="button"
              rel="nofollow"
              target="_blank"
              >Log in</a>
        {% endif%}
        {% if user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="/logout" >Logout</a>
        </li>
        {% else %}
        <li class="nav-item">
          <a
          data-mdb-ripple-init
          class="btn btn-outline-light btn-sm m-2"
          style="font-family: Pixelify Sans, sans-serif; font-weight: bold;"
          target="_blank"
          role="button"
          onclick="openRegister()"
          >Register</a>
          </li>
        {% endif%}
      </ul>
    </div>
    <select id="language-selector">
      <option value="en">üá¨üáß English</option>
      <option value="es">üá™üá∏ Espa√±ol</option>
      <option value="eu">üáµüá≤ Euskera</option>
      <option value="fr">üá´üá∑ Fran√ßais</option>
      <option value="fr2">ü•ê Clouseau</option>
    </select>
  </div>
</nav>

<body style="background-image: url('https://kingdomofhart.wordpress.com/wp-content/uploads/2014/08/smashwall.jpg'); background-repeat: no-repeat; background-size: cover;">
  <div class="row  " style=" display: flex; justify-content: center; height: 700px;">
    <div class="col-md-2 text-center " style="margin-top: 10%; justify-content: end;">
      {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" style="padding-top: 10px;" width="200px;" height="200px;">
      {% else %}
        <a href="#">
          <img src="https://bootdey.com/img/Content/avatar/avatar3.png" alt="" style="padding-top: 10px;" width="200" height="200">
        </a>
      {% endif %}
      <br><br>
      <div style="background: linear-gradient(
        45deg,
        hsla(168, 85%, 52%, 0.5),
        hsla(263, 88%, 45%, 0.7) 75%);  border-radius: 10px;
        height: 200px">
        <br>
        <h1 style="font-family: 'Press Start 2P', system-ui; color:white; padding-top: 10px;" data-i18n="1up">1UP</h1>
        <br>
        <h5 style="font-family: 'Press Start 2P', system-ui; color:white">{{ user.username }}</h5>
      </div>
    </div>

    <div style=" font-family: Tourney, sans-serif; height: 650px; display: flex; justify-content: center; background-size:contain; background-position: center top; background-repeat: no-repeat" class="col-7 shadow display: flex; flex-direction: row">
      <canvas class=" border border-5 border-white " id="gameCanvas"  style=" margin-top: 10% ; width:90%; height: 90%; background-color:black; border-radius: 20px;"></canvas>	
    </div>
    <script>
      window.addEventListener("keydown", function(e) {
        const keys = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"];
        const isTyping = ["INPUT", "TEXTAREA"].includes(document.activeElement.tagName);

        if (keys.includes(e.key) && !isTyping) {
          e.preventDefault();
        }
      }, { passive: false });
    </script>
    <div id="gameOverModal" class="modal">
      <div class="modal-content">
        <h2 id="winnerText">Winner!</h2>
        <button id="goHome">Back</button>
      </div>
    </div> 
    <script src="{% static '1vsIA.js' %}"></script>
    <div class="col-md-2 text-center " style="margin-top: 10%; justify-content: end;">
      <img src="https://www.shutterstock.com/image-vector/robot-spaceman-pixel-art-character-600nw-2332572281.jpg" alt="player two avatar" style="padding-top: 10px; width: 200px; height: 200px; transform: scaleX(-1);">
      <br><br>
      <div style="background: linear-gradient(
        45deg,
        hsla(168, 85%, 52%, 0.5),
        hsla(263, 88%, 45%, 0.7) 75%);  border-radius: 10px;
        height: 200px;">
        <br>
        <h1 style="font-family: 'Press Start 2P', system-ui; color: white; padding-top: 10px;" data-i18n="2up">2UP</h1>
        <br>
        <h5 style="font-family: 'Press Start 2P', system-ui; color:white">IA</h5>
      </div>
    </div>
  </div>

  <div class="difficulty-selector d-flex justify-content-center my-3">
    <select id="difficultySelect" class="form-select w-auto text-center">
      <option value="easy">Easy</option>
      <option value="medium" selected>Normal</option>
      <option value="hard">Difficult</option>
    </select>
  </div>

  <div class="row" style="justify-content: center; ">
    <div class="col"></div>
    <div class="col-2 border-5 border-white" style="background: linear-gradient(
      45deg,
      hsla(120, 95%, 47%, 0.6),
      hsla(22, 100%, 49%, 0.8) 75%);  border-radius: 10px; padding: 15px 0px 15px 15px; justify-content: space-around;">
      <button id="startButton" class="arcade_botton border border-5  rounded-circle" style=" margin-left: 15px;" data-i18n="button.start">Start</button>
      <script>document.getElementById("startButton").addEventListener("click", () => {isPaused = false; music.play();});</script>
      <button id="pauseButton" class="arcade_botton border border-5  rounded-circle" style=" margin-left: 15px;" data-i18n="button.pause">Pause</button>
      <script>document.getElementById("pauseButton").addEventListener("click", () => {isPaused = true; ; music.pause();});</script>
    </div>
    <div class="col"></div>
  </div>

  <!-- <div id="log"></div> -->

  <div class="col">
    <p style="background-color: black;">
    <div style="font-family: 'Press Start 2P', system-ui; color:white; background-color: black; display: flex; justify-content: center; align-items: center;">
      <h1 data-i18n="high_score" style="margin-right: 10px;">High score:</h1>
      <h1>[ {{ high_score.user.username }}: {{high_score.wins}} ]</h1>
    </div>
  </div>
</body>
<audio id="music" src="../../staticfiles/retro-game-music.mp3" autoplay loop></audio>
<script src="{% static 'i18n.js' %}"></script>

<footer class="text-center text-white" style="background-image: url('https://i.pinimg.com/originals/83/b8/09/83b809857acd41a7bad4935b4734f9fc.gif'); background-position: center center;";>
  <div class="container">
    <section class="mt-5" style="height: 50px;">
      <div class="row text-center d-flex justify-content-center pt-3" style="font-family: Honk, system-ui;">
        <div class="col-md-3">
          <h6 class="footer_nav">
            <a class="nav-link" href="/" data-i18n="nav.home">Home</a>
          </h6>
        </div>
        <div class="col-md-3">
          <h6 class="footer_nav">
            {% if user.is_authenticated %}
              <a class="nav-link" href="/logout" >Logout</a>
            {% else %}
              <a
                data-mdb-ripple-init
                class="button btn-lm m-2"
                style="text-decoration: none; display: flex; align-items: flex-end;"
                onclick="openSignIn()"
                role="button"
                rel="nofollow"
                target="_blank"
                >Log in</a>
            {% endif %}
          </h6>
        </div>
        <div class="col-md-3">
          <h6 class="footer_nav">
            <a class="nav-link" href="/select" data-i18n="nav.select">Select</a>
          </h6>
        </div>
        <div class="col-md-3">
          <h6 class="footer_nav">
            <a class="nav-link" href="/about" data-i18n="nav.about">About us</a>
          </h6>
        </div>
      </div>
    </section>

    <hr class="my-2" />

    <section class="mb-5">
      <div class="row d-flex justify-content-center pt-3">
        <div class="col-lg-10">
          <p style="font-family: Honk, system-ui; font-size: 30px;">
            Lorem ipsum transcendece sit amet retropong adipisicing arcade. Sunt pong arena repellat quaerat voluptatibus placeat nam,
              common-core pariatur est quia magnam 42 Urduliz, ommnia est bytes.
          </p>
        </div>
      </div>
    </section>
  </div>

  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
    ¬© 2025 Copyright:
    <a class="text-white" href="https://mdbootstrap.com/">Retropong</a>
  </div>
</footer>

</html>